(function(){"use strict";var e={9323:function(e,t,o){var s=o(3751),r=o(641);const n={id:"app2",class:"flex flex-col h-full"};function a(e,t,o,s,a,l){const i=(0,r.g2)("Navbar"),u=(0,r.g2)("router-view"),c=(0,r.g2)("Footer");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(i),(0,r.bF)(u),(0,r.bF)(c)])}const l={class:"bg-blue-900 xl:rounded-b-xl rounded-none p-4 container mx-auto"},i={class:"container mx-auto flex justify-between items-center"};function u(e,t,o,s,n,a){const u=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",l,[(0,r.Lk)("div",i,[(0,r.Lk)("div",null,[(0,r.bF)(u,{to:"/tasks",class:"text-blue-200 mr-4 hover:text-blue-50"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("Liste des tâches")]))),_:1})]),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e)),class:"text-red-50 bg-red-500 hover:bg-red-700 py-2 px-4 rounded"}," Déconnexion ")])])}o(4114);var c={methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login")}}},d=o(6262);const p=(0,d.A)(c,[["render",u]]);var g=p;const h={class:"container bg-blue-800 py-3 xl:rounded-t-xl rounded-none mx-auto"};function b(e,t){return(0,r.uX)(),(0,r.CE)("footer",h,t[0]||(t[0]=[(0,r.Lk)("span",{class:"text-blue-100"},"Version 0.0.1 - ",-1),(0,r.Lk)("a",{href:"https://github.com/alexanderworldercraft",target:"_blank",class:"text-md underline italic hover:text-blue-50 font-bold text-blue-100"},"GitHub",-1)]))}const f={},m=(0,d.A)(f,[["render",b]]);var k=m,x={components:{Navbar:g,Footer:k}};const v=(0,d.A)(x,[["render",a]]);var y=v,w=o(5220);const L={class:"container mx-auto py-6 flex flex-col grow"};function P(e,t,o,s,n,a){const l=(0,r.g2)("TaskForm"),i=(0,r.g2)("TaskList");return(0,r.uX)(),(0,r.CE)("main",L,[(0,r.bF)(l,{onTaskAdded:a.fetchTasks},null,8,["onTaskAdded"]),(0,r.bF)(i,{ref:"taskList"},null,512)])}var T=o(33);const C={class:"container mx-auto px-6"},A={class:"divide-y divide-blue-200"},E={class:"flex items-center space-x-2 me-2"},S={class:"text-lg text-left text-blue-950 font-bold line-clamp-1"},D={class:"text-sm text-left text-gray-500"},I={class:"relative"},O=["onClick"],j=["onClick"],$={key:0,class:"absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md py-2 z-10"},F=["onClick"],X=["onClick"];function _(e,t,o,s,n,a){const l=(0,r.g2)("Pagination");return(0,r.uX)(),(0,r.CE)("article",C,[t[1]||(t[1]=(0,r.Lk)("h1",{class:"text-3xl text-left text-blue-900 italic font-bold mb-4"},"Liste des tâches",-1)),(0,r.Lk)("ul",A,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tasks,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.TaskID,class:"py-4 flex justify-between items-center"},[(0,r.Lk)("div",null,[(0,r.Lk)("div",E,[(0,r.Lk)("h3",S,(0,T.v_)(e.Description),1),(0,r.Lk)("span",{class:(0,T.C4)([{"bg-green-100 border border-green-800 text-green-800":1===e.Status,"bg-gray-100 border border-gray-800 text-gray-800":0===e.Status},"px-2 py-1 text-xs font-medium rounded-lg line-clamp-1"])},(0,T.v_)(1===e.Status?"Compléter":"En cours"),3)]),(0,r.Lk)("div",null,[(0,r.Lk)("p",D," Créer le "+(0,T.v_)(a.formatDate(e.CreatedAt)),1)])]),(0,r.Lk)("div",I,[(0,r.Lk)("button",{onClick:t=>a.toggleTaskStatus(e),class:"px-2 py-1 bg-white border border-blue-950 text-blue-950 hover:bg-blue-100 rounded-md line-clamp-1"},(0,T.v_)(1===e.Status?"Je n'ai pas fini":"Terminé la tâche"),9,O),(0,r.Lk)("button",{onClick:t=>a.toggleDropdown(e.TaskID),class:"ml-4 text-gray-500"},t[0]||(t[0]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-5 h-5 stroke-2"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12l6-6 6 6"})],-1)]),8,j),a.isDropdownOpen(e.TaskID)?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("button",{onClick:t=>a.editTask(e),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Éditer ",8,F),(0,r.Lk)("button",{onClick:t=>a.deleteTask(e.TaskID),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Supprimer ",8,X)])):(0,r.Q3)("",!0)])])))),128))]),(0,r.bF)(l,{currentPage:n.currentPage,totalPages:n.totalPages,onPageChanged:a.fetchTasks},null,8,["currentPage","totalPages","onPageChanged"])])}var N=o(4335);const M={class:"flex justify-center items-center space-x-2 py-4"},z=["disabled"],B=["onClick"],J=["disabled"];function V(e,t,o,s,n,a){return(0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.goToPreviousPage&&a.goToPreviousPage(...e)),disabled:1===o.currentPage,class:"text-blue-950 hover:text-blue-500 px-3 py-1"}," Previous ",8,z),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.totalPages,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,onClick:t=>a.changePage(e),class:(0,T.C4)([{"text-blue-500 font-bold":e===o.currentPage,"text-blue-950":e!==o.currentPage},"px-3 py-1"])},(0,T.v_)(e),11,B)))),128)),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.goToNextPage&&a.goToNextPage(...e)),disabled:o.currentPage===o.totalPages,class:"text-blue-950 hover:text-blue-500 px-3 py-1"}," Next ",8,J)])}var U={props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},methods:{goToPreviousPage(){this.currentPage>1&&this.$emit("page-changed",this.currentPage-1)},goToNextPage(){this.currentPage<this.totalPages&&this.$emit("page-changed",this.currentPage+1)},changePage(e){this.$emit("page-changed",e)}}};const q=(0,d.A)(U,[["render",V]]);var K=q,G={components:{Pagination:K},data(){return{tasks:[],currentPage:1,totalPages:1,limit:5,dropdownOpenTaskID:null}},created(){this.fetchTasks(this.currentPage)},methods:{fetchTasks(e=1){this.currentPage=e,N.A.get("http://localhost:3000/api/tasks",{params:{page:this.currentPage,limit:this.limit},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.tasks=e.data.tasks,this.totalPages=Math.ceil(e.data.total/this.limit)})).catch((e=>{console.error("Erreur lors de la récupération des tâches :",e)}))},toggleTaskStatus(e){const t=1===e.Status?0:1;N.A.put(`http://localhost:3000/api/tasks/${e.TaskID}`,{status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchTasks(this.currentPage)})).catch((e=>{console.error("Erreur lors de la mise à jour du statut de la tâche :",e)}))},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},toggleDropdown(e){this.dropdownOpenTaskID===e?this.dropdownOpenTaskID=null:this.dropdownOpenTaskID=e},isDropdownOpen(e){return this.dropdownOpenTaskID===e},editTask(e){console.log("Edit task:",e)},deleteTask(e){N.A.delete(`http://localhost:3000/api/tasks/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.fetchTasks(this.currentPage)})).catch((e=>{console.error("Erreur lors de la suppression de la tâche :",e)}))}}};const H=(0,d.A)(G,[["render",_],["__scopeId","data-v-31383d34"]]);var Q=H;const W={class:"container mx-auto mb-5 px-5"};function R(e,t,o,n,a,l){return(0,r.uX)(),(0,r.CE)("article",W,[t[3]||(t[3]=(0,r.Lk)("h2",{class:"text-3xl text-left font-bold mb-4 text-blue-900 italic"},"Ajouter une nouvelle tâche",-1)),(0,r.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.addTask&&l.addTask(...e)),["prevent"])),class:"flex flex-col max-w-96 mx-auto"},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.description=e),placeholder:"Description de la tâche",class:"border-2 rounded-lg border-blue-500 focus:outline-2 focus:outline-offset-2 focus:outline-blue-500 p-2 mb-4 block w-full shadow-md"},null,512),[[s.Jo,a.description]]),t[2]||(t[2]=(0,r.Lk)("button",{type:"submit",class:"bg-blue-500 text-blue-50 hover:bg-blue-700 py-2 px-4 rounded-lg shadow-lg w-fit hover:italic place-self-end"},"Ajouter la tâche",-1))],32)])}var Y={data(){return{description:""}},methods:{addTask(){N.A.post("http://localhost:3000/api/tasks",{description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((()=>{this.$emit("taskAdded"),this.description=""})).catch((e=>{console.error("Erreur lors de l'ajout de la tâche :",e)}))}}};const Z=(0,d.A)(Y,[["render",R]]);var ee=Z,te={components:{TaskList:Q,TaskForm:ee},methods:{fetchTasks(){this.$refs.taskList.fetchTasks()}}};const oe=(0,d.A)(te,[["render",P]]);var se=oe;const re={class:"container mx-auto py-6 flex flex-col grow"},ne={class:"sm:col-span-3"},ae={class:"relative mt-2 rounded-md shadow-sm"},le={class:"sm:col-span-3"},ie={class:"relative mt-2 rounded-md shadow-sm"};function ue(e,t,o,n,a,l){return(0,r.uX)(),(0,r.CE)("main",re,[(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.login&&l.login(...e)),["prevent"])),class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 w-fit mx-auto"},[t[5]||(t[5]=(0,r.Lk)("div",{class:"sm:col-span-6"},[(0,r.Lk)("h1",{class:"text-blue-950 text-2xl font-bold mb-4"},"Connexion")],-1)),(0,r.Lk)("div",ne,[(0,r.Lk)("div",null,[t[3]||(t[3]=(0,r.Lk)("label",{for:"username",class:"block text-sm text-left italic font-bold leading-6 text-blue-900"},"Nom d'utilisateur",-1)),(0,r.Lk)("div",ae,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),placeholder:"Nom d'utilisateur",type:"text",name:"username",id:"username",autocomplete:"username",class:"block w-full rounded-md border-0 py-1.5 pl-7 pr-20 text-blue-900 ring-1 ring-inset ring-blue-900 placeholder:text-blue-900 focus:ring-2 focus:ring-inset focus:ring-sky-600 sm:text-sm sm:leading-6 focus-visible:outline-sky-600"},null,512),[[s.Jo,a.username]])])])]),(0,r.Lk)("div",le,[(0,r.Lk)("div",null,[t[4]||(t[4]=(0,r.Lk)("label",{for:"password",class:"block text-sm font-bold italic text-left leading-6 text-blue-900"},"Mot de passe",-1)),(0,r.Lk)("div",ie,[(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),placeholder:"Mot de passe",name:"password",id:"password",class:"block w-full rounded-md border-0 py-1.5 pl-7 pr-20 text-blue-900 ring-1 ring-inset ring-blue-900 placeholder:text-blue-900 focus:ring-2 focus:ring-inset focus:ring-sky-600 sm:text-sm sm:leading-6 focus-visible:outline-sky-600"},null,512),[[s.Jo,a.password]])])])]),t[6]||(t[6]=(0,r.Lk)("div",{class:"mt-6 mb-3 flex items-center justify-end w-fit"},[(0,r.Lk)("button",{type:"submit",class:"rounded-md bg-blue-800 px-3 py-2 text-sm font-semibold text-blue-50 shadow-sm hover:bg-blue-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-800"},"Se connecter")],-1))],32)])}var ce={data(){return{username:"",password:""}},methods:{login(){N.A.post("http://localhost:3000/api/auth/login",{username:this.username,password:this.password}).then((e=>{localStorage.setItem("token",e.data.token),this.$router.push("/tasks")})).catch((e=>{console.error("Erreur lors de la connexion :",e)}))}}};const de=(0,d.A)(ce,[["render",ue]]);var pe=de;const ge=[{path:"/",redirect:"/tasks"},{path:"/tasks",component:se},{path:"/login",component:pe}],he=(0,w.aE)({history:(0,w.LA)(),routes:ge});he.beforeEach(((e,t,o)=>{const s=!!localStorage.getItem("token");"/login"===e.path||s?o():o("/login")}));var be=he;(0,s.Ef)(y).use(be).mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,n){if(!s){var a=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],n=e[c][2];for(var l=!0,i=0;i<s.length;i++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(l=!1,n<a&&(a=n));if(l){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,r,n]}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,n,a=s[0],l=s[1],i=s[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(i)var c=i(o)}for(t&&t(s);u<a.length;u++)n=a[u],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(9323)}));s=o.O(s)})();
//# sourceMappingURL=app.270a5f1b.js.map